<script >
    
    /**
     * WorkItem{
            workFlowName,workflowID,subject,recieveDate,stepNo,workFlowVersion,workFlowType,stepName,nextStepName,instructions,workObjectID,comments,action,
            sender,reciever,branch,forms,attachments
            isLastStep = false;
    }
     */
    
    
    
    processHandler.controller = {
        errMsg : "",
        groups : {  
             //groupFollowUpTLs : ["FollowUp_TLs"],    // groupFollowUpEmps : ["FollowUp_Emps"],
        },
    
        steps : {
            PerLeave_Launch : 'PerLeave_Launch',
            PerLeave_TLApprove: 'PerLeave_TLApprove',
            PerLeave_SupApprove: 'PerLeave_SupApprove',
            PerLeave_DeptSec: 'PerLeave_DeptSec',
            PerLeave_MngApprove: 'PerLeave_MngApprove',
            PerLeave_Update: 'PerLeave_Update',
            PerLeave_DDGApprove: 'PerLeave_DDGApprove',
            PerLeave_DDGSec: 'PerLeave_DDGSec',
            PerLeave_PersAdminSec : 'PerLeave_PersAdminSec',
            PerLeave_PersAdminEmp : 'PerLeave_PersAdminEmp',
            PerLeave_PersAdminTL : 'PerLeave_PersAdminTL',
            PerLeave_PersAdminSup : 'PerLeave_PersAdminSup',
            PerLeave_FinSec : 'PerLeave_FinSec',
            PerLeave_FinSup : 'PerLeave_FinSup',
            PerLeave_FinTL : 'PerLeave_FinTL',
            PerLeave_FinEmp : 'PerLeave_FinEmp',
        },
    
        forms : {
            Form_CertRequest : new Form('Form_CertRequest', 'شهادة لمن يهمه الأمر','Family Certificate'),
        },
    
        defineComponents(){    
            

           // this.forms.Form_CertRequest.addComponent(new ParagraphComponent('Line','الأدارة العامة','Public Administration',' font-weight-bold') );
        
           this.forms.Form_CertRequest.addComponent(new ParagraphComponent('Line','الإدارة العامة','Public Administration','font-weight-bold') );
        
           
            this.forms.Form_CertRequest.addComponent(new TxtComponent('RequesterName','اسم الموظف','Name',100,3) );
            this.forms.Form_CertRequest.addComponent(new TxtComponent('PhoneNo','تلفـــــــون','Phone .No',12,3) );
            this.forms.Form_CertRequest.addComponent(new TxtComponent('RequesterDept','الإدارة / المكتب','Dept. Name',150,3) );
            this.forms.Form_CertRequest.addComponent(new TxtComponent('CertRequesterName','إسم صاحب الشهادة','Cert.Reqstr Name',150,3) );
            this.forms.Form_CertRequest.addComponent(new TxtComponent('CivilID','رقم البطاقة المدنية','CivilID',15,3) );
            this.forms.Form_CertRequest.addComponent(new TxtComponent('CertType','نوع الشهادة','Cert. Type',300,3) );
            this.forms.Form_CertRequest.addComponent(new DropDownListComponent('Relationship',' صلة القرابة','Relationship',[new Option('','','0') ,new Option('الأم','Mother','1') , new Option('الآب','Father','2'), new Option('الجد والجدة','Grand Parents','3')],3) );                            
           
           
             this.forms.Form_CertRequest.addSignature(new Signature('EmpSignature','EmpSign','EmpSig','توقيع الموظف','Employee Signature')  );
        
           
            this.forms.Form_CertRequest.addComponent(new DateComponent('RequestDate',' التاريخ','Date','','',3));           
            this.forms.Form_CertRequest.addComponent(new ParagraphComponent('Line_1','ملاحظة : <br> لا تعطي الشهادة إلا لصلة القرابة من الدرجة الأولى',': Note<br> The testimony is given only for the relationship of kinship of the first degree','text-danger font-weight-bold') );
        
           
          

     
        },
    
        main(){
            try{
                this.defineComponents();
                processHandler.initialize();
                let stepName = processHandler.workItem.stepName;
                processHandler.recieversList.loadManager();
                //processHandler.recieversList.loadDeptManager();
                //processHandler.branchesList.load()); //to load all branches
                //processHandler.branchesList.load([1,2,5]); // to load specific branches using branch id
                //processHandler.actionsList.load([processHandler.actionsList.status, processHandler.actionsList.approved]);
    
                
    
                if(stepName == this.steps.PerLeave_Launch){   
                }
                else if(stepName == this.steps.PerLeave_TLApprove){
                }
            
                
    
    
    
                
                
                    this.forms.Form_CertRequest.select();
                    this.forms.Form_CertRequest.updateComponentsFromEntity();
                    
            
    
    
    
    
                    app.renderLabels();
            processHandler.openProcessModal();
            processHandler.setWorkFlowIDLabel();
            }
            catch(error){ throw error;}
        },

        
    
        validate(){
            //validator.markAsInvalidField('myTxt');
         },
    
        send(){ },
    

        
    
    
    }
    
    $(document).ready( ()=>{ try{ processHandler.controller.main(); }catch(error){ app.alertError(error.message); }} );
    </script>
    

    <div class="container-fluid pr-1 pl-1" >
   
        <div class="row">
            <div class="col p-1 " >
                <nav>
                    <div class="nav nav-pills mb-1 ml-auto" id="nav-tab" role="tablist"></div>
                </nav>
                <div class="tab-content shadow border border-secondary rounded p-2 bg-white" id="nav-tabContent">
                    <!-- Form_CertRequest-Tab -->
                    <div class="tab-pane fade show active" id="nav-Form_CertRequest" role="tabpanel" aria-labelledby="Form_CertRequest-tab">
                        <!-- the main container for all Form_CertRequest controls -->
                        <div class="container-fluid">
                  
                                <div class="row">
                                    <div class="col p-1 mb-4" data-container-for="Form_CertRequest_title"></div>
                                </div>
                                  <div class="row pt-4">
                                  </div>
                                <div class="row p-1">
                                    <div class="col pr-3 pl-3" data-container-for="Line"></div>
                                    </div>
                                     <div class="row pt-4">
                                    </div>



                                <div class="row p-1"> 
                                    <div class="col-7 pr-2 pl-3" data-container-for="RequestDate"></div>
                                </div>

                              <!--  <div class="row p-1">
                                    <div class="col-7 pr-2 pl-4"data-container-for="RequestDate"></div>
                                </div> -->


                                <div class="row p-1">
                                    <div class="col-7 pr-2 pl-3" data-container-for="RequesterName"></div>
                                </div>
                                <div class="row p-1">
                                    <div class="col-7 pr-2 pl-3" data-container-for="PhoneNo"></div>
                                </div>
                                <div class="row p-1">
                                    <div class="col-7 pr-2 pl-3" data-container-for="RequesterDept"></div>
                                </div>
                                <div class="row p-1">
                                    <div class="col-7 pr-2 pl-3" data-container-for="CertRequesterName"></div>
                                </div>
                                <div class="row p-1">
                                    <div class="col-7 pr-2 pl-3" data-container-for="CivilID"></div>
                                </div>
                                <div class="row p-1">
                                    <div class="col-7 pr-2 pl-3" data-container-for="CertType"></div>
                                </div>

                                <div class="row p-1">
                                    <div class="col-7 pr-2 pl-3" data-container-for="Relationship"></div>
                                </div>
                                <div class="row pt-4">
                                </div>
                                <div class="row p-1">
                                    <div class="col p-3"> </div>
                                    <div class="col-4 pr-4 pl-4" data-container-for="EmpSignature"></div>
                                </div>
                                 <div class="row pt-4">
                                </div>
                            <div class="row p-1">
                                <div class="col pr-3 pl-3" data-container-for="Line_1"></div>
                            </div>

                
                       
                    </div>
    
                    <div class="text-right">
                        <hr>
                        <label id="workflowIDLabel" class="text-danger">مسلسل الاجراء</label>
                    </div>
                </div>
            </div>
        </div>
    </div>

    