<script >
    
/**
 * WorkItem{
        workFlowName,workflowID,subject,recieveDate,stepNo,workFlowVersion,workFlowType,stepName,nextStepName,instructions,workObjectID,comments,action,
        sender,reciever,branch,forms,attachments
        isLastStep = false;
}
 */



process.controller = {
    errMsg : "",
    groups : {  
         /* groupSSSEmps = ["SSS_RS"];
			groupSSSRevs = ["SSS_Main_TLs","SSS_JanoubSurra_TLs","SSS_FahdAhmd_TLs","SSS_Ardiya_TLs","SSS_SaadAbdallah_TLs","SSS_Tahreer_TLs"];
			groupSSSMngs = ["SSS_Main_Head","SSS_JanoubSurra_Head","SSS_FahdAhmd_Head","SSS_Ardiya_Head","SSS_SaadAbdallah_Head","SSS_Tahreer_Head"];
			//For Al-Ardyia Branch & SaadAbdallah Branch--Not Using
			groupSSSRevsArdiya = ["SSS_Ardiya_TLs","SSS_Main_TLs"];
			groupSSSMngsArdiya = ["SSS_Ardiya_Head","SSS_Main_Head"];
			groupSSSRevsSaadAbdallah = ["SSS_SaadAbdallah_TLs","SSS_Main_TLs"];
			groupSSSMngsSaadAbdallah = ["SSS_SaadAbdallah_Head","SSS_Main_Head"];			
			//-------------
			groupRegEmps = ["Reg_AutoEntryEmps","Reg_LegalResearchers","Reg_3rdResearchers","Reg_5thResearchers","Reg_EmployerResarchers"];
			groupRegTLs  = ["Reg_AutoEntryTLs","Reg_LegalTLs","Reg_3rdTLs","Reg_5thTLs","Reg_EmployerTLs"];
			groupRegAutoEntyEmps = ["Reg_AutoEntryEmps"];
			groupRegAutoEntyTLs = ["Reg_AutoEntryTLs"];
			groupRegLegalsEmps = ["Reg_LegalResearchers"];
			groupRegLegalsTLs = ["Reg_LegalTLs"];
			groupReg3rdEmps = ["Reg_3rdResearchers"];
			groupReg3rdTLs = ["Reg_3rdTLs"];
			groupReg5thEmps = ["Reg_5thResearchers"];
			groupReg5thTLs = ["Reg_5thTLs"];
			groupRegEmployerEmps = ["Reg_EmployerResarchers"];
			groupRegEmployerTLs = ["Reg_EmployerTLs"];
			groupPensionEmps = ["Pens_Accountants","Pens_LegalResearchers","ServiceComputation_Emps","Pen_UCC_Emps"];
			groupPensionTLs = ["Pens_AccountantTLs","Pens_LegalTLs","ServiceComputation_TLs","Pen_UCC_TLs"];
			groupPenLegalEmp = ["Pens_LegalResearchers"];
			groupPenLegalTLs = ["Pens_LegalTLs"];
			groupPenAcctEmp = ["Pens_Accountants"];
			groupPenAcctTLs = ["Pens_AccountantTLs"];
			groupPenSrvCompEmp = ["ServiceComputation_Emps"];
			groupPenSrvCompTLs = ["ServiceComputation_TLs"];
			groupUCCEmps = ["Pen_UCC_Emps"];
			groupUCCTLs = ["Pen_UCC_TLs"];
			
			groupBeneficiaryEmps = ["Benef_Accountants","Benef_LegalResearchers"];
			groupBeneficiaryTLs = ["Benef_AccountantTLs","Benef_LegalTLs"];
			groupBeneLegalEmp = ["Benef_LegalResearchers"];
			groupBeneLegalTLs = ["Benef_LegalTLs"];
			groupBeneAcctEmp = ["Benef_Accountants"];
			groupBeneAcctTLs = ["Benef_AccountantTLs"];
			
			groupSCEmp = ["ServiceComputation_Emps"];
			groupSCTLs = ["ServiceComputation_TLs"];
			groupContEmp = ["Cont_GovrEmps","Cont_PrivEmps","Cont_OilEmps","Cont_5thEmps","FollowUp_Emps","Cont_Covid19"];
			groupContTLs = ["Cont_GovrTLs","Cont_PrivTLs","Cont_OilTLs","Cont_5thTLs","FollowUp_TLs","Cont_Covid19"];
			groupContGovEmp  = ["Cont_GovrEmps","Cont_Covid19"];
			groupContGovTLs  = ["Cont_GovrTLs","Cont_Covid19"];
			groupContPrivEmp  = ["Cont_PrivEmps","Cont_Covid19"];
			groupContPrivTLs  = ["Cont_PrivTLs","Cont_Covid19"];
			groupCont5thEmp  = ["Cont_5thEmps","Cont_Covid19"];
			groupCont5thTLs  = ["Cont_5thTLs","Cont_Covid19"];
			groupContOilEmp  = ["Cont_OilEmps","Cont_Covid19"];
			groupContOilTLs  = ["Cont_OilTLs","Cont_Covid19"];
			groupContFollowEmp  = ["FollowUp_Emps","Cont_Covid19"];
			groupContFollowTLs  = ["FollowUp_TLs","Cont_Covid19"];
			groupAcctEmps = ["Fin_Division_Accounts_Emps"];
			groupAcctTLs = ["Fin_Division_Accounts_TLs"];
			groupBdgtEmps = ["Fin_Division_Budget_Emps"];
			groupBdgtTLs = ["Fin_Division_Budget_TLs"];
			groupFollowupEmps = ["FollowUp_Emps"];
			groupFollowupTLs = ["FollowUp_TLs"];
			groupGulfCitizesEmps = ["GulfCitizes_Emps"];
			groupGulfCitizesTLs = ["GulfCitizes_TLs"];
			groupGulfCitizesSSEmps = ["GulfCitizes_SSEmps"];
			groupGulfCitizesSSTLs = ["GulfCitizes_SSTLs"];			
			groupSysDevEmps = ["Dev_Emps"];
			groupSysDevTLs = ["Dev_TLs"];*/         
    },

    steps : {
        ProTransfer_Launch : 'ProTransfer_Launch',
        ProTransfer_Imaging: 'ProTransfer_Imaging',
        ProTransfer_TL: 'ProTransfer_TL',
        ProTransfer_Update: 'ProTransfer_Update',
        ProTransfer_Sup: 'ProTransfer_Sup',
        ProTransfer_RecSec: 'ProTransfer_RecSec',
        ProTransfer_TLAssign: 'ProTransfer_TLAssign',
        ProTransfer_RecEmp: 'ProTransfer_RecEmp',
        ProTransfer_RecTL : 'ProTransfer_RecTL',
        ProTransfer_InvDepSec : 'ProTransfer_InvDepSec',
        ProTransfer_RecSup : 'ProTransfer_RecSup',
        ProTransfer_OriginatorEnd : 'ProTransfer_OriginatorEnd',
    },

    forms : {
        Form_ProcessTransfer : new Form('Form_ProcessTransfer','طلــــــب تحـويــــــل إجــــــــــراء','طلــــــب تحـويــــــل إجــــــــــراء'),
    },

    defineComponents(){    
        this.forms.Form_ProcessTransfer.addComponent(new DateComponent('RequestDate','التاريخ','التاريخ','','') );
        this.forms.Form_ProcessTransfer.addComponent(new TxtComponent('From','من','من','') );
        this.forms.Form_ProcessTransfer.addComponent(new TxtComponent('To','إلى','إلى','') );
        this.forms.Form_ProcessTransfer.addComponent(new TxtComponent('ClientName','الاسم','الاسم','') );
        this.forms.Form_ProcessTransfer.addComponent(new TxtComponent('CivilID','الرقم المدني','الرقم المدني','') );
        this.forms.Form_ProcessTransfer.addComponent(new TxtComponent('FileNo','رقم الحفظ','رقم الحفظ','') );
        this.forms.Form_ProcessTransfer.addComponent(new TxtComponent('SSNo','رقم الهوية','رقم الهوية','') );
        this.forms.Form_ProcessTransfer.addComponent(new TxtComponent('RegistrationNo','رقم التسجيل','رقم التسجيل','') );
        this.forms.Form_ProcessTransfer.addComponent(new TxtComponent('EmployerName','صاحب العمل','صاحب العمل','') );
        this.forms.Form_ProcessTransfer.addComponent(new TxtComponent('IBAN','IBAN','IBAN','') );
        this.forms.Form_ProcessTransfer.addComponent(new NotesComponent('Subject','المــوضــــــوع','المــوضــــــوع',15,3000) );
        this.forms.Form_ProcessTransfer.addSignature(new Signature('DeptEmpSignature','DeptEmp','DeptEmpSig','الموظـــف المختـــص','الموظـــف المختـــص'));
        this.forms.Form_ProcessTransfer.addSignature(new Signature('DeptTLSignature','DeptTL','DeptTLSig','الـــمـــراجـــــــــع','الـــمـــراجـــــــــع'));
        this.forms.Form_ProcessTransfer.addSignature(new Signature('DeptMngSignature','DeptMng','DeptMngSig','الاعـــــــــــتــــــــــــمـــاد','الاعـــــــــــتــــــــــــمـــاد'));
        this.forms.Form_ProcessTransfer.addComponent(new NotesComponent('FinResponse','رد الإدارة المعنيــــــــــــة','رد الإدارة المعنيــــــــــــة',15,3000) );
        this.forms.Form_ProcessTransfer.addSignature(new Signature('FinEmpSignature','FinEmp','FinEmpSig','الموظـــف المختـــص','الموظـــف المختـــص'));
        this.forms.Form_ProcessTransfer.addSignature(new Signature('FinTLSignature','FinTL','FinTLSig','الـــمـــراجـــــــــع','الـــمـــراجـــــــــع'));
        this.forms.Form_ProcessTransfer.addSignature(new Signature('FinSupSignature','FinSup','FinSupSig','الاعـــــــــــتــــــــــــمـــاد','الاعـــــــــــتــــــــــــمـــاد'));
        this.forms.Form_ProcessTransfer.components.RequestDate.labelSize = 5;
        this.forms.Form_ProcessTransfer.components.RequestDate.render();
        /*this.forms.Form_ProcessTransfer.components.To.labelSize = 3;
        this.forms.Form_ProcessTransfer.components.To.render();
        this.forms.Form_ProcessTransfer.components.SSNo.labelSize = 3;
        this.forms.Form_ProcessTransfer.components.SSNo.render();
        this.forms.Form_ProcessTransfer.components.FileNo.labelSize = 3;
        this.forms.Form_ProcessTransfer.components.FileNo.render();
        this.forms.Form_ProcessTransfer.components.CivilID.labelSize = 3;
        this.forms.Form_ProcessTransfer.components.CivilID.render();
        this.forms.Form_ProcessTransfer.components.ClientName.labelSize = 3;
        this.forms.Form_ProcessTransfer.components.ClientName.render();*/
    },

    main(){
        try{
            this.defineComponents();
            process.initialize();
            let stepName = process.workItem.stepName;
            process.recieversList.loadManager();

            if(stepName == this.steps.PenAdv_Launch){   
            }
            else if(stepName == this.steps.PenAdv_SSReviewer){
            }
        
            
            this.forms.Form_ProcessTransfer.select();
            this.forms.Form_ProcessTransfer.updateComponentsFromEntity();
            app.renderLabels();
            process.openProcessModal();
            process.setWorkFlowIDLabel();
        }
        catch(error){ throw error;}
    },

    validate(){
        //validator.markAsInvalidField('myTxt');
     },

    send(){ },

}

$(document).ready( ()=>{ try{ process.controller.main() }catch(error){ app.alertError(error.message); }} );
</script>

<style>
    .nav-pills .nav-link.active {
    background-color: rgb(108, 117, 126) !important;
}
</style>

<div class="container-fluid pr-1 pl-1" >
    <div class="row">
        <div class="col p-1 " >
            <nav>
                <div class="nav nav-pills mb-1 ml-auto" id="nav-tab" role="tablist"></div>
            </nav>
            <div class="tab-content shadow border border-secondary rounded p-2 bg-white" id="nav-tabContent">
                <!-- Form_ProcessTransfer-Tab -->
                <div class="tab-pane fade show active" id="nav-Form_ProcessTransfer" role="tabpanel" aria-labelledby="Form_ProcessTransfer-tab">
                    <!-- the main container for all Form_ProcessTransfer controls -->
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col p-1 mb-4" data-container-for="Form_ProcessTransfer_title"></div>
                        </div>
                        <div class="row">
                            <div class="col-4 pt-1 pd-1 pr-3 pl-3" data-container-for="RequestDate"></div>
                            <div class="col-3 pt-1 pd-1 pr-3 pl-3"></div>
                            <div class="col-5 pt-1 pd-1 pr-3 pl-3" data-container-for="FileNo"></div>
                        </div>
                        <div class="row">
                            <div class="col-5 pt-1 pd-1 pr-3 pl-3" data-container-for="From"></div>
                            <div class="col-2 pt-1 pd-1 pr-3 pl-3"></div>
                            <div class="col-5 pt-1 pd-1 pr-3 pl-3" data-container-for="SSNo"></div>
                        </div>
                        <div class="row">
                            <div class="col-5 pt-1 pd-1 pr-3 pl-3" data-container-for="To"></div>
                            <div class="col-2 pt-1 pd-1 pr-3 pl-3"></div>
                            <div class="col-5 pt-1 pd-1 pr-3 pl-3" data-container-for="CivilID"></div>
                        </div>
                        <div class="row">
                            <div class="col-5 pt-1 pd-1 pr-3 pl-3" data-container-for="ClientName"></div>
                            <div class="col-2 pt-1 pd-1 pr-3 pl-3"></div>
                            <div class="col-5 pt-1 pd-1 pr-3 pl-3" data-container-for="IBAN"></div>
                        </div>
                        <div class="row">
                            <div class="col-5 pt-1 pd-1 pr-3 pl-3" data-container-for="EmployerName"></div>
                            <div class="col-2 pt-1 pd-1 pr-3 pl-3"></div>
                            <div class="col-5 pt-1 pd-1 pr-3 pl-3" data-container-for="RegistrationNo"></div>
                        </div>                          
                        <div class="row">
                            <div class="col pt-3 pd-3 pr-3 pl-3" data-container-for="Subject"></div>
                        </div>
                        <div class="row">
                            <div class="col-4 pt-3 pd-3 pr-3 pl-3" data-container-for="DeptEmpSignature"></div>
                            <div class="col-4 pt-3 pd-3 pr-3 pl-3" data-container-for="DeptTLSignature"></div>
                            <div class="col-4 pt-3 pd-3 pr-3 pl-3" data-container-for="DeptMngSignature"></div>
                        </div>
                        <div class="row">
                            <div class="col pt-3 pd-3 pr-3 pl-3" data-container-for="FinResponse"></div>
                        </div>
                        <div class="row">
                            <div class="col-4 pt-3 pd-3 pr-3 pl-3" data-container-for="FinEmpSignature"></div>
                            <div class="col-4 pt-3 pd-3 pr-3 pl-3" data-container-for="FinTLSignature"></div>
                            <div class="col-4 pt-3 pd-3 pr-3 pl-3" data-container-for="FinSupSignature"></div>
                        </div>                        
                    </div>
                </div>

                <div class="text-right">
                    <hr>
                    <label id="workflowIDLabel" class="text-danger">مسلسل الاجراء</label>
                </div>
            </div>
        </div>
    </div>
</div>
