<script >
    
    /**
     * WorkItem{
            workFlowName,workflowID,subject,recieveDate,stepNo,workFlowVersion,workFlowType,stepName,nextStepName,instructions,workObjectID,comments,action,
            sender,reciever,branch,forms,attachments
            isLastStep = false;
    }
     */
    
    
    
    process.controller = {
        errMsg : "",
        groups : {  
             //groupFollowUpTLs : ["FollowUp_TLs"],    // groupFollowUpEmps : ["FollowUp_Emps"],
        },
    
        steps : {
            PerLeave_Launch : 'PerLeave_Launch',
            PerLeave_TLApprove: 'PerLeave_TLApprove',
            PerLeave_SupApprove: 'PerLeave_SupApprove',
            PerLeave_DeptSec: 'PerLeave_DeptSec',
            PerLeave_MngApprove: 'PerLeave_MngApprove',
            PerLeave_Update: 'PerLeave_Update',
            PerLeave_DDGApprove: 'PerLeave_DDGApprove',
            PerLeave_DDGSec: 'PerLeave_DDGSec',
            PerLeave_PersAdminSec : 'PerLeave_PersAdminSec',
            PerLeave_PersAdminEmp : 'PerLeave_PersAdminEmp',
            PerLeave_PersAdminTL : 'PerLeave_PersAdminTL',
            PerLeave_PersAdminSup : 'PerLeave_PersAdminSup',
            PerLeave_FinSec : 'PerLeave_FinSec',
            PerLeave_FinSup : 'PerLeave_FinSup',
            PerLeave_FinTL : 'PerLeave_FinTL',
            PerLeave_FinEmp : 'PerLeave_FinEmp',
        },
    
        forms : {
            Form_IssueCertificate : new Form('Form_IssueCertificate', 'نموذج طلب شهادة ثبوتية','Certificate Application Form'),
        },
    
        defineComponents(){    


            this.forms.Form_IssueCertificate.addComponent(new DateComponent('RequestDate','التاريخ','Date','','') );
            this.forms.Form_IssueCertificate.addComponent(new TxtComponent('RequesterName','اسم الموظف','Name',5) );
            this.forms.Form_IssueCertificate.addComponent(new TxtComponent('RequesterDept','الإدارة','Department') );
           
            this.forms.Form_IssueCertificate.addComponent(new ParagraphComponent('Line_1','الشهادة المطلوبة : ',': Certificate Required','font-weight-bold') );
      

        //checkbox
       this.forms.Form_IssueCertificate.addComponent(new CheckBoxComponent('SalaryCert','شهادة راتب','.Salary Cert') );
       this.forms.Form_IssueCertificate.addComponent(new CheckBoxComponent('SalarylessCert','شهادة عمل بدون مرتب','Working Certificate without Salary') );

       this.forms.Form_IssueCertificate.addComponent(new CheckBoxComponent('DetailedTotalSalaryCert','شهادة إجمالي الراتب "بالتفصيل" ','.Detailed Total Salary Cert') );
       this.forms.Form_IssueCertificate.addComponent(new CheckBoxComponent('DetailedNetSalaryCert','شهادة صافي الراتب "بالتفصيل"','.Detailed Net Salary Cert') );

       this.forms.Form_IssueCertificate.addComponent(new CheckBoxComponent('AccomodationSalaryCert','شهادة راتب وسكن','.Residance & Salary Cert') );
       this.forms.Form_IssueCertificate.addComponent(new CheckBoxComponent('AccomodationSalarylessCert','شهادة سكن بدون راتب','Residance Certificate without Salary') );
     
       this.forms.Form_IssueCertificate.addComponent(new CheckBoxComponent('SalaryCertWithEmpDate','شهادة راتب مع تاريخ التعيين','Salary Certificate With Hiring Date') );
       this.forms.Form_IssueCertificate.addComponent(new CheckBoxComponent('SalaryCertWithDegree','شهادة راتب مع الدرجة','Salary Certificate with Degree') );
      
       this.forms.Form_IssueCertificate.addComponent(new CheckBoxComponent('HiringCertWithoutSalary','شهادة تعيين بدون راتب','Hiring Certificate without Salary') );
       this.forms.Form_IssueCertificate.addComponent(new CheckBoxComponent('ExtLoanTransferRequestMemo','كتاب بأستمرار تحويل لطلب قرض خارجي','Certificate of Salary transfer for bank loan') );

       this.forms.Form_IssueCertificate.addComponent(new CheckBoxComponent('LeavingPermitCert','إذن التصريح بمغادرة الكويت لغير الكويتي','Permission to leave Kuwait for non-kuwaitis') );

       this.forms.Form_IssueCertificate.addComponent(new NotesComponent('FormPurpose','الغرض من طلب الشهادة - لتقديمها إلى','Purpose',4,300) );
          
 
       this.forms.Form_IssueCertificate.addSignature(new Signature('RequesterName1','RequesterSig','ReqSig','توقيع طالب الشهادة','Applicants Signature')  );
       this.forms.Form_IssueCertificate.addSignature(new Signature('DeptMng','ManagerSig','MngSig','اعتماد مدير الإدارة','Manager Approval')  );
      


       this.forms.Form_IssueCertificate.addComponent(new ParagraphComponent('Line_2','ملاحظة: سوف يتم استلام الشهادة بعد ٣ أيام عمل من تقدسم الطلب','Note: The certificate will be received 3 working days after the application is submitted','text-danger font-weight-bold') );
      

           
           
        },
    
        main(){
            try{
                this.defineComponents();
                process.initialize();
                let stepName = process.workItem.stepName;
                process.recieversList.loadManager();
                //process.recieversList.loadDeptManager();
                //process.branchesList.load()); //to load all branches
                //process.branchesList.load([1,2,5]); // to load specific branches using branch id
                //process.actionsList.load([process.actionsList.status, process.actionsList.approved]);
    
                
    
                if(stepName == this.steps.PerLeave_Launch){   
                }
                else if(stepName == this.steps.PerLeave_TLApprove){
                }
            
                
                /* component manipulation */ 
                    //this.forms.Form_IssueCertificate.components.RequesterName.setValue('ABC');
                    //this.forms.Form_IssueCertificate.components.requesterName.disable();
                    
                    //this.forms.Form_IssueCertificate.components.FromDate.setMinDate('2020-05-01');
                    //this.forms.Form_IssueCertificate.components.FromDate.setMaxDate('2020-05-10');
                    
                    //this.forms.Form_IssueCertificate.components.VactionType.setValue(2);//give it the value of the option object to be selected
                    //alert(this.forms.Form_IssueCertificate.components.VactionType.getText()); // retrieves the shown selected text
                    //this.forms.Form_IssueCertificate.components.VactionType.setOptions([new Option('','','')]); //load different options
                    //this.forms.Form_IssueCertificate.components.VactionType.addOption( new Option('x','x','3') );
                    //this.forms.Form_IssueCertificate.components.VactionType.addOption(new Option('y','y','4') );
                    //this.forms.Form_IssueCertificate.components.VactionType.setValue('3');
                    //this.forms.Form_IssueCertificate.components.VactionType.removeOptionByValue('4');
                    
                    //this.forms.Form_IssueCertificate.components.IsPaid.disable();
                    //this.forms.Form_IssueCertificate.components.IsPaid.setValue(true);
                    //this.forms.Form_IssueCertificate.components.IsPaid.check();
                    //this.forms.Form_IssueCertificate.components.IsPaid.uncheck();
    
                    //this.forms.Form_IssueCertificate.components.SupSignature.enable();
                
    
    
    
                
                /* form manipulation */
                    //this.forms.Form_IssueCertificate.enable();
                    //this.forms.Form_IssueCertificate.disable();
                    //this.forms.Form_WorkDeduction.hide();
                    //this.forms.Form_WorkDeduction.select();
                    this.forms.Form_IssueCertificate.select();
                    this.forms.Form_IssueCertificate.updateComponentsFromEntity();
                    
            
    
    
    
    
                    app.renderLabels();
            process.openProcessModal();
            process.setWorkFlowIDLabel();
            }
            catch(error){ throw error;}
        },

        
    
        validate(){
            //validator.markAsInvalidField('myTxt');
         },
    
        send(){ },
    

        
        // testSignature(){
        //     util.viewObjectContent(this.forms.Form_IssueCertificate.components.SupSignature.getSigner()); 
        // },
    
    
    }
    
    $(document).ready( ()=>{ try{ process.controller.main(); }catch(error){ app.alertError(error.message); }} );
    </script>
    

    <div class="container-fluid pr-1 pl-1" >
   
        <div class="row">
            <div class="col p-1 " >
                <nav>
                    <div class="nav nav-pills mb-1 ml-auto" id="nav-tab" role="tablist"></div>
                </nav>
                <div class="tab-content shadow border border-secondary rounded p-2 bg-white" id="nav-tabContent">
                    <!-- Form_IssueCertificate-Tab -->
                    <div class="tab-pane fade show active" id="nav-Form_IssueCertificate" role="tabpanel" aria-labelledby="Form_IssueCertificate-tab">
                        <!-- the main container for all Form_IssueCertificate controls -->
                        <div class="container-fluid">
                  
                                <div class="row">
                                    <div class="col p-1 mb-4" data-container-for="Form_IssueCertificate_title"></div>
                                </div>

                                <div>
                                    <div class="col-7 pr-2 pl-3" data-container-for="RequestDate"></div>
                                </div>

                                <div>
                                <div class="col-7 pr-2 pl-3" data-container-for="RequesterName"></div>
                                </div>

                                <div>
                                <div class="col-7 pr-2 pl-3" data-container-for="RequesterDept"></div>
                                </div>


                                <br>

                            <div class="row">
                                <div class="col pr-3 pl-3" data-container-for="Line_1"></div>
                            </div>


                            <div class="row p-1">
                                <div class="col pr-3 pl-3" data-container-for="SalaryCert"></div>
                                <div class="col pr-3 pl-3" data-container-for="SalarylessCert"></div>
                            </div>




                            <div class="row p-1">
                                <div class="col pr-3 pl-3" data-container-for="DetailedTotalSalaryCert"></div>
                                <div class="col pr-3 pl-3" data-container-for="DetailedNetSalaryCert"></div>
                            </div>



                            <div class="row p-1">
                                <div class="col pr-3 pl-3" data-container-for="AccomodationSalaryCert"></div>
                                <div class="col pr-3 pl-3" data-container-for="AccomodationSalarylessCert"></div>
                            </div>

                            <div class="row p-1">
                                <div class="col pr-3 pl-3" data-container-for="SalaryCertWithEmpDate"></div>
                                <div class="col pr-3 pl-3" data-container-for="SalaryCertWithDegree"></div>
                            </div>

                            <div class="row p-1">
                                <div class="col pr-3 pl-3" data-container-for="HiringCertWithoutSalary"></div>
                                <div class="col pr-3 pl-3" data-container-for="ExtLoanTransferRequestMemo"></div>
                            </div>

                            <div class="row p-1">
                                <div class="col pr-3 pl-3" data-container-for="LeavingPermitCert"></div>
                            </div>

                            <br>
                            <div class="row">
                                <div class="col pr-3 pl-3" data-container-for="FormPurpose"></div>
                            </div>

                            <br>

                            <div class="row p-1">
                                <div class="col pr-3 pl-3" data-container-for="RequesterName1"></div>
                                <div class="col pr-3 pl-3" data-container-for="DeptMng"></div>
                            </div>


                            <br><br>

                            <div class="row">
                                <div class="col pr-3 pl-3" data-container-for="Line_2"></div>
                            </div>



 

    
                       </div>
                       
                    </div>
    
                    <div class="text-right">
                        <hr>
                        <label id="workflowIDLabel" class="text-danger">مسلسل الاجراء</label>
                    </div>
                </div>
            </div>
        </div>
    </div>

    